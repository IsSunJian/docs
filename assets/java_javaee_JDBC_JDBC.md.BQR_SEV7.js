import{_ as s,c as i,o as a,a4 as t}from"./chunks/framework.K9vKjHgL.js";const E=JSON.parse('{"title":"JDBC","description":"","frontmatter":{},"headers":[],"relativePath":"java/javaee/JDBC/JDBC.md","filePath":"java/javaee/JDBC/JDBC.md"}'),n={name:"java/javaee/JDBC/JDBC.md"},h=t(`<h1 id="jdbc" tabindex="-1">JDBC <a class="header-anchor" href="#jdbc" aria-label="Permalink to &quot;JDBC&quot;">​</a></h1><hr><h2 id="jdbc-简介" tabindex="-1">JDBC 简介 <a class="header-anchor" href="#jdbc-简介" aria-label="Permalink to &quot;JDBC 简介&quot;">​</a></h2><p>JDBC 是 Java EE 提供的数据库接口，负责连接 java 程序和后台数据库。安装数据库驱动程序后，开发者可以按照 JDBC 规范直接在 Java 程序上对数据库进行操作，由数据库厂商负责具体实现。</p><h3 id="驱动安装" tabindex="-1">驱动安装 <a class="header-anchor" href="#驱动安装" aria-label="Permalink to &quot;驱动安装&quot;">​</a></h3><ol><li><p>下载 MySQL 驱动包，解压后得到 jar 库文件：<a href="http://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noreferrer">http://dev.mysql.com/downloads/connector/j/</a></p></li><li><p>打开 IDE，在对应项目中 configure build path 导入 jar 库文件。</p></li></ol><hr><h2 id="jdbc-编程" tabindex="-1">JDBC 编程 <a class="header-anchor" href="#jdbc-编程" aria-label="Permalink to &quot;JDBC 编程&quot;">​</a></h2><p>JDBC 常用工具类位于 sql 包内，使用时需导入：<code>import java.sql.*</code> 。使用时可能 抛出 SQLException 异常。</p><h3 id="加载驱动" tabindex="-1">加载驱动 <a class="header-anchor" href="#加载驱动" aria-label="Permalink to &quot;加载驱动&quot;">​</a></h3><p>JDBC 首先要使用反射机制加载驱动类，并创建其对象。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">Class.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">forName</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">com.mysql.cj.jdbc.Driver</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">);          </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// MySQL 数据库驱动</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">Class.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">forName</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">oracle.jdbc.driver.OracleDriver</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">);   </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// Oracle 数据库驱动</span></span></code></pre></div><h3 id="连接数据库-connection" tabindex="-1">连接数据库 Connection <a class="header-anchor" href="#连接数据库-connection" aria-label="Permalink to &quot;连接数据库 Connection&quot;">​</a></h3><p>JDBC 由 Connection 类负责连接数据库，参数中输入数据库 URL、账号、密码。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 连接本地 RUNOOB 数据库，需设置时区</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> DB_URL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">jdbc:mysql://localhost:3306/RUNOOB?useSSL=false&amp;serverTimezone=UTC</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> USER </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">root</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;            </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 数据库账号</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> PASS </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">123456</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;          </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 数据库密码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(DB_URL,USER,PASS);    </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 建立连接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();                                                       </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 关闭连接</span></span></code></pre></div><h3 id="执行语句-statement" tabindex="-1">执行语句 Statement <a class="header-anchor" href="#执行语句-statement" aria-label="Permalink to &quot;执行语句 Statement&quot;">​</a></h3><p>JDBC 由 Statement 类负责发送 SQL 语句。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">Statement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">createStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();         </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 创建 Statement 对象</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// executeQuery 执行查询操作，返回 ResultSet 结果集</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">ResultSet</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">executeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">SELECT * FROM websites</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">); </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// executeUpdate 执行更新操作，返回 int 数据表示受影响行数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> len </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">executeUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">DELETE * FROM websites</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">     </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();                                      </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 关闭 Statement 对象</span></span></code></pre></div><h3 id="返回查询结果-resultset" tabindex="-1">返回查询结果 ResultSet <a class="header-anchor" href="#返回查询结果-resultset" aria-label="Permalink to &quot;返回查询结果 ResultSet&quot;">​</a></h3><p>JDBC 由 ResultSet 类返回 select 语句执行结果，读取 executeQuery 方法返回的数据。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">ResultSet</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">executeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(sql);             </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 获取返回结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">               </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">()){                                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 输出返回结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">getString</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">area_id</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">));    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">}</span></span></code></pre></div><hr><h2 id="jdbc-进阶" tabindex="-1">JDBC 进阶 <a class="header-anchor" href="#jdbc-进阶" aria-label="Permalink to &quot;JDBC 进阶&quot;">​</a></h2><h3 id="预编译-preparedstatement" tabindex="-1">预编译 PreparedStatement <a class="header-anchor" href="#预编译-preparedstatement" aria-label="Permalink to &quot;预编译 PreparedStatement&quot;">​</a></h3><p>PreparedStatement 类继承自 Statement 类，在 JDBC 开发中用来取代前者。有以下两个优势：</p><ol><li>可对 SQL 语句进行预编译，可以灵活地修改 SQL 语句，提高开发效率。</li><li>把用户输入单引号转义，防止恶意注入，保护数据库安全。</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> connection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> sql </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">INSERT INTO test(id,name) VALUES (?,?)</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">PreparedStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> connection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">preparedStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(sql);   </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 创建对象并预编译</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">setInt</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;">755</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">);                                          </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 在第一个占位符(?)位置插入数字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">setString</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">MrJoker</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">);                                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 在第二个占位符(?)位置插入字符串</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">executeUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();                                         </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 更新并执行</span></span></code></pre></div><h3 id="批处理-executebath" tabindex="-1">批处理 executeBath <a class="header-anchor" href="#批处理-executebath" aria-label="Permalink to &quot;批处理 executeBath&quot;">​</a></h3><p>PreparedStatement 类可以通过 executeBath 方法批量处理 SQL 语句，进一步提高效率。其返回值为一个 int[] 数组。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> connection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> sql </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">INSERT INTO test(id,name) VALUES (?,?)</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">PreparedStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> connection.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">prepareStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(sql);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">    stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">setInt</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">, i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">    stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">setString</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">, (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">号士兵</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">    stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">addBatch</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();                                           </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 语句添加到批处理序列中</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">preparedStatement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">executeBatch</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();                              </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 语句发送给数据库批量处理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">preparedStatement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">clearBatch</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();                                </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 清空批处理序列</span></span></code></pre></div><h3 id="大文本和二进制数据" tabindex="-1">大文本和二进制数据 <a class="header-anchor" href="#大文本和二进制数据" aria-label="Permalink to &quot;大文本和二进制数据&quot;">​</a></h3><ul><li><p>clob 用于存储大文本</p></li><li><p>blob用于存储二进制数据</p></li></ul><hr><h2 id="jdbc-示例" tabindex="-1">JDBC 示例 <a class="header-anchor" href="#jdbc-示例" aria-label="Permalink to &quot;JDBC 示例&quot;">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 适用于 JDK 1.8 以后版本</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> java.sql.</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#97E1F1;"> MySQLTest</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> JDBC_DRIVER </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">com.mysql.cj.jdbc.Driver</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> DB_URL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">jdbc:mysql://localhost:3306/RUNOOB?useSSL=false&amp;serverTimezone=UTC</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> USER </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">root</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">; </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> PASS </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">123456</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> useMethod（）{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        Connection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;                  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">        PreparedStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">;                    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            Class.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">forName</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(JDBC_DRIVER);                                </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(DB_URL,USER,PASS);    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">preparedStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">SELECT id, name, url FROM websites</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">);  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">            ResultSet</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;"> stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">executeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">()){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">getString</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#E7EE98;">area_id</span><span style="--shiki-light:#032F62;--shiki-dark:#DEE492;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">));   </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">();                    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">        }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">SQLException</span><span style="--shiki-light:#E36209;--shiki-dark:#FFB86C;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> se</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">){         </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 处理 JDBC 错误</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            se.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">        }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">Exception</span><span style="--shiki-light:#E36209;--shiki-dark:#FFB86C;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">){             </span><span style="--shiki-light:#6A737D;--shiki-dark:#7B7F8B;">// 处理 Class.forName 错误</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">        }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">{                                                 </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">{ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(stmt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">) stmt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">SQLException</span><span style="--shiki-light:#E36209;--shiki-dark:#FFB86C;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> se2</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">){}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#BF9EEE;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">) conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#62E884;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">            }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F286C4;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#97E1F1;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">SQLException</span><span style="--shiki-light:#E36209;--shiki-dark:#FFB86C;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> se</span><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">){} </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">     }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F6F6F4;">}</span></span></code></pre></div>`,35),k=[h];function l(p,e,F,r,d,y){return a(),i("div",null,k)}const c=s(n,[["render",l]]);export{E as __pageData,c as default};
