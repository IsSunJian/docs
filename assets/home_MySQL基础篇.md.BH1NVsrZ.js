import{_ as s,c as e,o as t,a4 as n}from"./chunks/framework.K9vKjHgL.js";const p="/docs/assets/image-20220604130048234.CQ-txjvs.png",l="/docs/assets/image-20220604201130760.VGIOcBK-.png",i="/docs/assets/image-20220604201411978.DGus-fUB.png",d="/docs/assets/image-20220604201513196.CwL3u5s2.png",o="/docs/assets/image-20220605080339628.BH-s2oIF.png",c="/docs/assets/image-20220605080630910.Ba_Mf1cg.png",a="/docs/assets/image-20220605081106113.B7YLLoFq.png",r="/docs/assets/image-20220605121214330.zvF16mYM.png",h="data:image/png;base64,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",u="data:image/png;base64,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",g="/docs/assets/image-20220605125309397._ZIRzIGt.png",b="/docs/assets/image-20220605125417374.DaOB2ctq.png",m="/docs/assets/image-20220605125445124.CLDGfme0.png",S=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"home/MySQL基础篇.md","filePath":"home/MySQL基础篇.md"}'),v={name:"home/MySQL基础篇.md"},k=n(`<h2 id="一、sql" tabindex="-1">一、SQL <a class="header-anchor" href="#一、sql" aria-label="Permalink to &quot;一、SQL&quot;">​</a></h2><blockquote><p>全称 <code>Structured Query Language</code>，结构化查询语言。操作关系型数据库的编程语言，定义了一套操作关系型数据库统一<strong>标准</strong> 。</p></blockquote><h2 id="_1-sql通用语法" tabindex="-1">1.SQL通用语法 <a class="header-anchor" href="#_1-sql通用语法" aria-label="Permalink to &quot;1.SQL通用语法&quot;">​</a></h2><blockquote><p>在学习具体的SQL语句之前，先来了解一下SQL语言的同于语法。</p></blockquote><ol><li>SQL语句可以单行或多行书写，以分号结尾。</li><li>SQL语句可以使用空格/缩进来增强语句的可读性。</li><li>MySQL数据库的SQL语句<strong>不区分大小写</strong>，关键字建议使用大写。</li><li>注释： <ul><li>单行注释：<code>--</code> 注释内容 或 <code>#</code> 注释内容</li><li>多行注释：<code>/* 注释内容 */</code></li></ul></li></ol><h2 id="_2-sql分类" tabindex="-1">2.SQL分类 <a class="header-anchor" href="#_2-sql分类" aria-label="Permalink to &quot;2.SQL分类&quot;">​</a></h2><blockquote><p><strong>SQL语句，根据其功能，主要分为四类：<code>DDL</code>、<code>DML</code>、<code>DQL</code>、<code>DCL</code>。</strong></p><p><strong>但是作为<code>Java开发</code>的程序员我们仅需掌握<code>DML</code>及<code>DQL</code>即可。</strong></p></blockquote><table><thead><tr><th>分类</th><th>全称</th><th>说明</th></tr></thead><tbody><tr><td><strong>DDL</strong></td><td>Data Definition Language</td><td>数据定义语言，用来定义数据库对象（<strong>数据库、表、字段</strong>）</td></tr><tr><td><strong>DML</strong></td><td>Data Manipulation Language</td><td>数据操作语言，用来对数据库表中的数据进行<strong>增删改</strong></td></tr><tr><td><strong>DQL</strong></td><td>Data Query Language</td><td>数据查询语言，用来<strong>查询数据库中表的记录</strong></td></tr><tr><td><strong>DCL</strong></td><td>Data Control Language</td><td>数据控制语言，用来<strong>创建数据库用户</strong>、控制数据库的控制权限</td></tr></tbody></table><h2 id="_3-ddl" tabindex="-1">3.DDL <a class="header-anchor" href="#_3-ddl" aria-label="Permalink to &quot;3.DDL&quot;">​</a></h2><blockquote><p><strong><code>Data Definition Language</code>，数据定义语言，用来定义数据库对象(数据库，表，字段) 。</strong></p></blockquote><h3 id="_3-1-操作数据库的命令" tabindex="-1">3.1 操作数据库的命令 <a class="header-anchor" href="#_3-1-操作数据库的命令" aria-label="Permalink to &quot;3.1 操作数据库的命令&quot;">​</a></h3><blockquote><p>下面演示的命令中出现的中括号表示为可选命令（加粗字体为常用命令）</p></blockquote><ol><li><p>查询所有数据库</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SHOW DATABASES;</span></span></code></pre></div></li><li><p>查询当前数据库</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT DATABASE();</span></span></code></pre></div></li><li><p><strong>创建数据库</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span># UTF8字符集长度为3字节，有些符号占4字节，所以推荐用utf8mb4字符集</span></span>
<span class="line"><span>CREATE DATABASE [ IF NOT EXISTS ] 数据库名 [ DEFAULT CHARSET 字符集] [COLLATE 排序规则 ];</span></span></code></pre></div></li><li><p><strong>删除数据库</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>DROP DATABASE [ IF EXISTS ] 数据库名;</span></span></code></pre></div></li><li><p>使用数据库</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>USE 数据库名;</span></span></code></pre></div></li></ol><h3 id="_3-2-操作表的命令" tabindex="-1">3.2 操作表的命令 <a class="header-anchor" href="#_3-2-操作表的命令" aria-label="Permalink to &quot;3.2 操作表的命令&quot;">​</a></h3><blockquote><p>下面演示的命令中出现的中括号表示为可选命令（加粗字体为常用命令）</p></blockquote><ol><li><p>查询当前数据库所有表</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SHOW TABLES;</span></span></code></pre></div></li><li><p><strong>查询表结构</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>DESC 表名;</span></span></code></pre></div></li><li><p><strong>查询指定表的建表语句</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SHOW CREATE TABLE 表名;</span></span></code></pre></div></li><li><p><strong>创建表（注意：最后一个字段后面没有逗号）</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>create table 表名 (</span></span>
<span class="line"><span>字段名1 类型(宽度) 约束条件 [COMMENT 字段1注释],</span></span>
<span class="line"><span>字段名2 类型(宽度) 约束条件 [COMMENT 字段2注释],</span></span>
<span class="line"><span>字段名3 类型(宽度) 约束条件 [COMMENT 字段3注释]</span></span>
<span class="line"><span>) [ COMMENT 表注释 ];</span></span></code></pre></div></li><li><p>添加字段</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];</span></span></code></pre></div></li><li><p>修改数据类型</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);</span></span></code></pre></div></li><li><p>修改字段名和字段类型</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</span></span></code></pre></div></li><li><p>删除字段</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 DROP 字段名;</span></span></code></pre></div></li><li><p>修改表名</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 RENAME TO 新表名;</span></span></code></pre></div></li><li><p><strong>删除表</strong></p></li></ol><pre><code>\`\`\`
#将整张表彻底删掉
DROP TABLE [IF EXISTS] 表名;
\`\`\`

\`\`\`
#以该方式删除的表相当于仅删除表中的数据，但是表结构保留
\`\`\`
</code></pre><p><strong>Ps：实际开发中表的结构在创建时就已经确定了，后期基本上不会出现更改或者添加字段的情况，因此关于操作字段的命令可以不用死记。</strong></p><h3 id="_3-3-字段的数据类型" tabindex="-1">3.3 字段的数据类型 <a class="header-anchor" href="#_3-3-字段的数据类型" aria-label="Permalink to &quot;3.3 字段的数据类型&quot;">​</a></h3><h4 id="a-整型" tabindex="-1">a） 整型 <a class="header-anchor" href="#a-整型" aria-label="Permalink to &quot;a） 整型&quot;">​</a></h4><table><thead><tr><th>MySQL数据类型</th><th>含义（有符号）</th></tr></thead><tbody><tr><td>tinyint</td><td>1字节，范围（-128~127）</td></tr><tr><td>smallint</td><td>2字节，范围（-32768~32767）</td></tr><tr><td>mediumint</td><td>3字节，范围（-8388608~8388607）</td></tr><tr><td>int</td><td>4字节，范围（-2147483648~2147483647）</td></tr><tr><td>bigint</td><td>8字节，范围（±9.22*10的18次方）</td></tr></tbody></table><p>整型默认使用的都是有符号的，当然了，我们也可以加上<code>unsigned</code>关键字，定义成无符号的类型，那么对应的取值范围就会发生改变。</p><p>比如：<code>tinyint unsigned</code>的取值范围为<code>0~255</code>，</p><h4 id="b-浮点型" tabindex="-1">b） 浮点型 <a class="header-anchor" href="#b-浮点型" aria-label="Permalink to &quot;b） 浮点型&quot;">​</a></h4><table><thead><tr><th>MySQL数据类型</th><th>含义</th></tr></thead><tbody><tr><td>float(m, d)</td><td>4字节，单精度浮点型，m总长度，d小数位</td></tr><tr><td>double(m, d)</td><td>8字节，双精度浮点型，m总长度，d小数位</td></tr><tr><td>decimal(m, d)</td><td>decimal是存储为字符串的浮点数，对应我们java的Bigdecimal</td></tr></tbody></table><p>我们使用一个例子来判断小括号内参数的含义，针对数据类型为<code>float(5, 3)</code>的列，做了以下试验：</p><ul><li>插入<code>123.45678</code>，最后查询得到的结果为<code>99.999</code>；</li><li>插入<code>12.34567</code>，最后查询结果为<code>12.346</code>；</li></ul><p>所以，在使用浮点型的时候，还是要注意陷阱的，要以插入数据库中的实际结果为准。</p><h4 id="c-字符串" tabindex="-1">c） 字符串 <a class="header-anchor" href="#c-字符串" aria-label="Permalink to &quot;c） 字符串&quot;">​</a></h4><table><thead><tr><th>MySQL数据类型</th><th>含义</th></tr></thead><tbody><tr><td>char(n)</td><td>固定长度，最多255个字符</td></tr><tr><td>varchar(n)</td><td>可变长度，最大容量65535个字节</td></tr><tr><td>tinytext</td><td>可变长度，最大容量255个字节</td></tr><tr><td>text</td><td>可变长度，最大容量65535个字节</td></tr><tr><td>mediumtext</td><td>可变长度，最大容量2的24次方-1个字节 16MB</td></tr><tr><td>longtext</td><td>可变长度，最大容量2的32次方-1个字节 4GB</td></tr></tbody></table><h4 id="d-日期和时间" tabindex="-1">d） 日期和时间 <a class="header-anchor" href="#d-日期和时间" aria-label="Permalink to &quot;d） 日期和时间&quot;">​</a></h4><table><thead><tr><th>MySQL数据类型</th><th>含义</th></tr></thead><tbody><tr><td><strong>date</strong></td><td>3字节，日期，格式：2022-09-18</td></tr><tr><td><strong>time</strong></td><td>3字节，时间，格式：08:42:30</td></tr><tr><td><strong>datetime</strong></td><td>8字节，日期时间，格式：2022-09-18 08:42:30</td></tr><tr><td>timestamp</td><td>4字节，自动存储记录修改的时间</td></tr><tr><td>year</td><td>1字节，年份，格式：2020</td></tr></tbody></table><h2 id="_4-dml-常用" tabindex="-1">4.DML（常用） <a class="header-anchor" href="#_4-dml-常用" aria-label="Permalink to &quot;4.DML（常用）&quot;">​</a></h2><blockquote><p><strong>DML英文全称是Data Manipulation Language(数据操作语言)，用来对数据库中表的数据记录进行<code>增、删、改</code>操作。</strong></p></blockquote><ul><li>添加数据（<code>INSERT</code>）</li><li>修改数据（<code>UPDATE</code>）</li><li>删除数据（<code>DELETE</code>）</li></ul><h3 id="_4-1-添加数据" tabindex="-1">4.1 添加数据 <a class="header-anchor" href="#_4-1-添加数据" aria-label="Permalink to &quot;4.1 添加数据&quot;">​</a></h3><ol><li><p>添加指定字段</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...);</span></span></code></pre></div></li><li><p>添加全部字段</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>INSERT INTO 表名 VALUES (值1, 值2, ...);</span></span></code></pre></div></li><li><p>批量添加数据</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...),(值1, 值2, ...), (值1, 值2, ...);</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</span></span></code></pre></div></li></ol><p>注意事项</p><ul><li><p>插入数据时，指定的字段顺序需要与值的顺序是一一对应的。</p></li><li><p>字符串和日期类型数据应该包含在引号中</p></li><li><p>插入的数据大小应该在字段的规定范围内</p></li></ul><h3 id="_4-2-修改和删除数据" tabindex="-1">4.2 修改和删除数据 <a class="header-anchor" href="#_4-2-修改和删除数据" aria-label="Permalink to &quot;4.2 修改和删除数据&quot;">​</a></h3><ol><li><p>修改符合条件的数据</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>UPDATE 表名 SET 字段名1 = 值1, 字段名2 = 值2, ... [ WHERE 条件 ];</span></span></code></pre></div></li><li><p>删除复合条件的数据</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>DELETE FROM 表名 [ WHERE 条件 ];</span></span></code></pre></div></li></ol><p><strong>注意：如果不加<code>WHERE</code>条件则默认操作整张表的数据</strong></p><h2 id="_5-dql-常用" tabindex="-1">5.DQL（常用） <a class="header-anchor" href="#_5-dql-常用" aria-label="Permalink to &quot;5.DQL（常用）&quot;">​</a></h2><blockquote><p><strong><code>DQL</code>英文全称是<code>Data Query Language</code>(数据查询语言)，数据查询语言，用来查询数据库中表的记录。</strong></p></blockquote><p>小提示：</p><ul><li>查询关键字: <code>SELECT</code></li><li><code>DQL</code>是我们每天接触编写最多也是最难的SQL，该语言用来查询记录，不会修改数据库和表结构。</li><li>实际开发中<strong>查询操作</strong>的频次是要远高于<strong>增删改</strong>的。</li><li>查询可以当作一个很大的章节，其中包含<strong>单表查询、多表查询、分组查询</strong>等等。</li></ul><h3 id="_5-1-课前准备" tabindex="-1">5.1 课前准备 <a class="header-anchor" href="#_5-1-课前准备" aria-label="Permalink to &quot;5.1 课前准备&quot;">​</a></h3><blockquote><p><strong>在学习查询语句前我们需要用到一个图形化工具来操作数据库，这会使我们的学习效率及开发效率大大的提高。</strong></p></blockquote><ul><li><p>图形化界面工具（根据个人喜好选择）：<a href="https://lanzoux.com/iHtYJ05vitze" target="_blank" rel="noreferrer">Navicat15</a></p></li><li><p>在开始学习之前我们需要执行以下SQL语句作为我们的学习素材：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>CREATE DATABASE IF NOT EXISTS itcast DEFAULT CHARSET utf8mb4;</span></span>
<span class="line"><span>DROP TABLE IF EXISTS employee;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CREATE TABLE emp (</span></span>
<span class="line"><span>id int COMMENT &#39;编号&#39;,</span></span>
<span class="line"><span>workno varchar(10) COMMENT &#39;工号&#39;,</span></span>
<span class="line"><span>name varchar(10) COMMENT &#39;姓名&#39;,</span></span>
<span class="line"><span>gender char(1) COMMENT &#39;性别&#39;,</span></span>
<span class="line"><span>age tinyint UNSIGNED COMMENT &#39;年龄&#39;,</span></span>
<span class="line"><span>idcard char(18) COMMENT &#39;身份证号&#39;,</span></span>
<span class="line"><span>workaddress varchar(50) COMMENT &#39;工作地址&#39;,</span></span>
<span class="line"><span>entrydate date COMMENT &#39;入职时间&#39;</span></span>
<span class="line"><span>) COMMENT &#39;员工表&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (1, &#39;00001&#39;, &#39;柳岩666&#39;, &#39;女&#39;, 20, &#39;123456789012345678&#39;, &#39;北京&#39;, &#39;2000-01-01&#39;);</span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (2, &#39;00002&#39;, &#39;张无忌&#39;, &#39;男&#39;, 18, &#39;123456789012345670&#39;, &#39;北京&#39;, &#39;2005-09-01&#39;);</span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (3, &#39;00003&#39;, &#39;韦一笑&#39;, &#39;男&#39;, 38, &#39;123456789712345670&#39;, &#39;上海&#39;, &#39;2005-08-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (4, &#39;00004&#39;, &#39;赵敏&#39;, &#39;女&#39;, 18, &#39;123456757123845670&#39;, &#39;北京&#39;, &#39;2009-12-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (5, &#39;00005&#39;, &#39;小昭&#39;, &#39;女&#39;, 16, &#39;123456769012345678&#39;, &#39;上海&#39;, &#39;2007-07-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (6, &#39;00006&#39;, &#39;杨逍&#39;, &#39;男&#39;, 28, &#39;12345678931234567X&#39;, &#39;北京&#39;, &#39;2006-01-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (7, &#39;00007&#39;, &#39;范瑶&#39;, &#39;男&#39;, 40, &#39;123456789212345670&#39;, &#39;北京&#39;, &#39;2005-05-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (8, &#39;00008&#39;, &#39;黛绮丝&#39;, &#39;女&#39;, 38, &#39;123456157123645670&#39;, &#39;天津&#39;, &#39;2015-05-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (9, &#39;00009&#39;, &#39;范凉凉&#39;, &#39;女&#39;, 45, &#39;123156789012345678&#39;, &#39;北京&#39;, &#39;2010-04-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (10, &#39;00010&#39;, &#39;陈友谅&#39;, &#39;男&#39;, 53, &#39;123456789012345670&#39;, &#39;上海&#39;, &#39;2011-01-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (11, &#39;00011&#39;, &#39;张士诚&#39;, &#39;男&#39;, 55, &#39;123567897123465670&#39;, &#39;江苏&#39;, &#39;2015-05-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (12, &#39;00012&#39;, &#39;常遇春&#39;, &#39;男&#39;, 32, &#39;123446757152345670&#39;, &#39;北京&#39;, &#39;2004-02-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (13, &#39;00013&#39;, &#39;张三丰&#39;, &#39;男&#39;, 88, &#39;123656789012345678&#39;, &#39;江苏&#39;, &#39;2020-11-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (14, &#39;00014&#39;, &#39;灭绝&#39;, &#39;女&#39;, 65, &#39;123456719012345670&#39;, &#39;西安&#39;, &#39;2019-05-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (15, &#39;00015&#39;, &#39;胡青牛&#39;, &#39;男&#39;, 70, &#39;12345674971234567X&#39;, &#39;西安&#39;, &#39;2018-04-01&#39;); </span></span>
<span class="line"><span>INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate) VALUES (16, &#39;00016&#39;, &#39;周芷若&#39;, &#39;女&#39;, 18, null, &#39;北京&#39;, &#39;2012-06-01&#39;);</span></span></code></pre></div></li></ul><h3 id="_5-2-基本语法" tabindex="-1">5.2 基本语法 <a class="header-anchor" href="#_5-2-基本语法" aria-label="Permalink to &quot;5.2 基本语法&quot;">​</a></h3><ul><li><p>DQL 查询语句，语法结构如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT</span></span>
<span class="line"><span>    字段列表</span></span>
<span class="line"><span>FROM</span></span>
<span class="line"><span>    表名字段</span></span>
<span class="line"><span>WHERE</span></span>
<span class="line"><span>    条件列表</span></span>
<span class="line"><span>GROUP BY</span></span>
<span class="line"><span>    分组字段列表</span></span>
<span class="line"><span>HAVING</span></span>
<span class="line"><span>    分组后的条件列表</span></span>
<span class="line"><span>ORDER BY</span></span>
<span class="line"><span>    排序字段列表</span></span>
<span class="line"><span>LIMIT</span></span>
<span class="line"><span>    分页参数</span></span></code></pre></div></li><li><p>我们在学习的时候，会将上面的完整语法进行拆分，分为以下几个部分：</p><ul><li><p>基础查询（不带任何条件）</p></li><li><p>条件查询（<code>WHERE</code>）</p></li><li><p>聚合函数（<code>count</code>、<code>max</code>、<code>min</code>、<code>avg</code>、<code>sum</code>）</p></li><li><p>分组查询（<code>group by</code>）</p></li><li><p>排序查询（<code>order by</code>）</p></li><li><p>分页查询（<code>limit</code>）</p></li></ul></li></ul><h3 id="_5-3-基础查询" tabindex="-1">5.3 基础查询 <a class="header-anchor" href="#_5-3-基础查询" aria-label="Permalink to &quot;5.3 基础查询&quot;">​</a></h3><h4 id="a-语法格式" tabindex="-1">a）语法格式 <a class="header-anchor" href="#a-语法格式" aria-label="Permalink to &quot;a）语法格式&quot;">​</a></h4><ul><li><p>查询多个字段</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段1, 字段2, 字段3 ... FROM 表名 ;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT * FROM 表名 ;</span></span></code></pre></div><p><strong>注意 : * 号代表查询所有字段，在实际开发中尽量少用（不直观、影响效率）。</strong></p></li><li><p>字段设置别名</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段1 [ AS 别名1 ], 字段2 [ AS 别名2 ], 字段3 [ AS 别名3 ], ... FROM 表名;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段1 [ 别名1 ] , 字段2 [ 别名2 ] ... FROM 表名;</span></span></code></pre></div></li><li><p>去除重复记录</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT DISTINCT 字段列表 FROM 表名;</span></span></code></pre></div></li></ul><h4 id="b-案例练习" tabindex="-1">b）案例练习 <a class="header-anchor" href="#b-案例练习" aria-label="Permalink to &quot;b）案例练习&quot;">​</a></h4><ul><li><p>查询指定字段 <code>name</code>, <code>workno</code>, <code>age</code>并返回</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select name,workno,age from emp;</span></span></code></pre></div></li><li><p>查询返回所有字段</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select id, workno, name, gender, age, idcard, workaddress, entrydate from emp;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp; #不推荐</span></span></code></pre></div></li><li><p>查询所有员工的工作地址，起别名</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select workaddress AS &#39;工作地址&#39; from emp;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select workaddress &#39;工作地址&#39; from emp; #省略AS的写法</span></span></code></pre></div></li><li><p>查询公司员工的上班地址有哪些（不要重复）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select DISTINCT workaddress from emp;</span></span></code></pre></div></li></ul><h3 id="_5-4-条件查询" tabindex="-1">5.4 条件查询 <a class="header-anchor" href="#_5-4-条件查询" aria-label="Permalink to &quot;5.4 条件查询&quot;">​</a></h3><h4 id="a-语法格式-1" tabindex="-1">a）语法格式 <a class="header-anchor" href="#a-语法格式-1" aria-label="Permalink to &quot;a）语法格式&quot;">​</a></h4><ul><li><p>查询语句中使用<code>WHERE</code>条件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 WHERE 条件列表 ;</span></span></code></pre></div></li></ul><h4 id="b-条件运算符" tabindex="-1">b）条件运算符 <a class="header-anchor" href="#b-条件运算符" aria-label="Permalink to &quot;b）条件运算符&quot;">​</a></h4><ul><li><p>常用的比较运算符</p><table><thead><tr><th>比较运算符</th><th>功能</th></tr></thead><tbody><tr><td><code>&gt;</code></td><td>大于</td></tr><tr><td><code>&gt;=</code></td><td>大于等于</td></tr><tr><td><code>&lt;</code></td><td>小于</td></tr><tr><td><code>&lt;=</code></td><td>小于等于</td></tr><tr><td><code>=</code></td><td>等于</td></tr><tr><td><code>&lt;&gt; 或 !=</code></td><td>不等于</td></tr><tr><td><code>BETWEEN … AND …</code></td><td>在某个范围内（含最小、最大值）</td></tr><tr><td><code>IN(…)</code></td><td>在in之后的列表中的值，多选一</td></tr><tr><td><code>LIKE 占位符</code></td><td>模糊匹配（<code>_</code>匹配单个字符，<code>%</code>匹配任意个字符）</td></tr><tr><td><code>IS NULL</code></td><td>是NULL</td></tr></tbody></table></li><li><p>常用的逻辑运算符</p><table><thead><tr><th>逻辑运算符</th><th>功能</th></tr></thead><tbody><tr><td>AND 或 &amp;&amp;</td><td>并且（多个条件同时成立）</td></tr><tr><td>OR 或</td><td></td></tr><tr><td>NOT 或 !</td><td>非，不是</td></tr></tbody></table></li></ul><h4 id="c-案例练习" tabindex="-1">c）案例练习 <a class="header-anchor" href="#c-案例练习" aria-label="Permalink to &quot;c）案例练习&quot;">​</a></h4><ul><li><p>查询年龄等于 88 的员工</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age = 88;</span></span></code></pre></div></li><li><p>查询年龄小于 20 的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age &lt; 20;</span></span></code></pre></div></li><li><p>查询年龄小于等于 20 的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age &lt;= 20;</span></span></code></pre></div></li><li><p>查询没有身份证号的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where idcard is null;</span></span></code></pre></div></li><li><p>查询有身份证号的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where idcard is not null;</span></span></code></pre></div></li><li><p>查询年龄不等于 88 的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age != 88;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age &lt;&gt; 88;</span></span></code></pre></div></li><li><p>查询年龄在15岁（包含）到 20岁（包含）之间的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age &gt;= 15 &amp;&amp; age &lt;= 20;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age &gt;= 15 and age &lt;= 20;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age BETWEEN 15 AND 20;</span></span></code></pre></div></li><li><p>查询性别为 女 且年龄小于 25岁的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where gender = &#39;女&#39; and age &lt; 25;</span></span></code></pre></div></li><li><p>查询年龄等于18 或 20 或 40 的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age = 18 or age = 20 or age = 40;</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where age in(18,20,40);</span></span></code></pre></div></li><li><p>查询姓名为两个字的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where name like &#39;__&#39;;</span></span></code></pre></div></li><li><p>查询身份证号最后一位是X的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where idcard like &#39;%X&#39;;</span></span></code></pre></div></li></ul><h3 id="_5-5-聚合函数" tabindex="-1">5.5 聚合函数 <a class="header-anchor" href="#_5-5-聚合函数" aria-label="Permalink to &quot;5.5 聚合函数&quot;">​</a></h3><blockquote><p><strong>将一列数据作为一个整体，进行纵向计算。</strong></p></blockquote><h4 id="a-常见的聚合函数" tabindex="-1">a）常见的聚合函数 <a class="header-anchor" href="#a-常见的聚合函数" aria-label="Permalink to &quot;a）常见的聚合函数&quot;">​</a></h4><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>count</td><td>统计数量</td></tr><tr><td>max</td><td>最大值</td></tr><tr><td>min</td><td>最小值</td></tr><tr><td>avg</td><td>平均值</td></tr><tr><td>sum</td><td>求和</td></tr></tbody></table><h4 id="b-语法格式" tabindex="-1">b）语法格式 <a class="header-anchor" href="#b-语法格式" aria-label="Permalink to &quot;b）语法格式&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 聚合函数(字段列表) FROM 表名 ;</span></span></code></pre></div><p><strong>注意 : NULL值是不参与所有聚合函数运算的。</strong></p><h4 id="c-案例练习-1" tabindex="-1">c）案例练习 <a class="header-anchor" href="#c-案例练习-1" aria-label="Permalink to &quot;c）案例练习&quot;">​</a></h4><ul><li><p>统计该企业员工数量</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select count(*) from emp; #返回结果是16，统计的是总记录数</span></span></code></pre></div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select count(idcard) from emp; #返回结果是15，统计的是idcard字段不为null的记录数</span></span></code></pre></div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select count(1) from emp; #会统计表中的所有的记录数，包含字段为null 的记录</span></span></code></pre></div><p>对于<code>count(*)</code> 、<code>count(字段)</code>、 <code>count(1)</code> 的具体原理，我们在进阶篇中SQL优化部分会详细讲解，此处大家只需要知道如何使用即可。</p></li><li><p>统计该企业员工的平均年龄</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select avg(age) from emp;</span></span></code></pre></div></li><li><p>统计该企业员工的最大年龄</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select max(age) from emp;</span></span></code></pre></div></li><li><p>统计该企业员工的最小年龄</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select min(age) from emp;</span></span></code></pre></div></li><li><p>统计西安地区员工的年龄之和</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select sum(age) from emp where workaddress = &#39;西安&#39;;</span></span></code></pre></div></li></ul><h3 id="_5-6-分组查询" tabindex="-1">5.6 分组查询 <a class="header-anchor" href="#_5-6-分组查询" aria-label="Permalink to &quot;5.6 分组查询&quot;">​</a></h3><h4 id="a-语法格式-2" tabindex="-1">a） 语法格式 <a class="header-anchor" href="#a-语法格式-2" aria-label="Permalink to &quot;a） 语法格式&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 [ WHERE 条件 ] GROUP BY 分组字段名 [ HAVING 分组 后过滤条件 ];</span></span></code></pre></div><h4 id="b-where与having区别" tabindex="-1">b）where与having区别 <a class="header-anchor" href="#b-where与having区别" aria-label="Permalink to &quot;b）where与having区别&quot;">​</a></h4><ul><li>执行时机不同：<code>where</code>是分组之前进行过滤，不满足<code>where</code>条件，不参与分组；而<code>having</code>是分组之后对结果进行过滤。</li><li>判断条件不同：<code>where</code>不能对聚合函数进行判断，而<code>having</code>可以。</li></ul><h4 id="c-案例练习-2" tabindex="-1">c）案例练习 <a class="header-anchor" href="#c-案例练习-2" aria-label="Permalink to &quot;c）案例练习&quot;">​</a></h4><ul><li><p>根据性别分组 , 统计男性员工 和 女性员工的数量</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select gender, count(*) from emp group by gender ;</span></span></code></pre></div></li><li><p>根据性别分组 , 统计男性员工 和 女性员工的平均年龄</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select gender, avg(age) from emp group by gender ;</span></span></code></pre></div></li><li><p>查询年龄小于45的员工 , 并根据工作地址分组 , 获取员工数量大于等于3的工作地址</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT workaddress,count(*) address_count</span></span>
<span class="line"><span>FROM emp</span></span>
<span class="line"><span>WHERE age &lt; 45</span></span>
<span class="line"><span>GROUP BY  workaddress</span></span>
<span class="line"><span>HAVING address_count &gt;= 3;</span></span></code></pre></div></li><li><p>统计各个工作地址上班的男性及女性员工的数量</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select workaddress, gender, count(*) &#39;数量&#39; from emp group by gender , workaddress ;</span></span></code></pre></div></li></ul><h3 id="_5-7-排序查询" tabindex="-1">5.7 排序查询 <a class="header-anchor" href="#_5-7-排序查询" aria-label="Permalink to &quot;5.7 排序查询&quot;">​</a></h3><blockquote><p>排序在日常开发中是非常常见的一个操作，有升序排序，也有降序排序。</p></blockquote><h4 id="a-语法格式-3" tabindex="-1">a）语法格式 <a class="header-anchor" href="#a-语法格式-3" aria-label="Permalink to &quot;a）语法格式&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1, 字段2 排序方式2;</span></span></code></pre></div><h4 id="b-排序方式" tabindex="-1">b）排序方式 <a class="header-anchor" href="#b-排序方式" aria-label="Permalink to &quot;b）排序方式&quot;">​</a></h4><ul><li><code>ASC</code>: 升序（默认）</li><li><code>DESC</code>: 降序</li></ul><p><strong>注意：如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序。</strong></p><h4 id="c-案例练习-3" tabindex="-1">c）案例练习 <a class="header-anchor" href="#c-案例练习-3" aria-label="Permalink to &quot;c）案例练习&quot;">​</a></h4><ul><li><p>根据年龄对公司的员工进行升序排序</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp order by age asc;</span></span></code></pre></div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp order by age;</span></span></code></pre></div></li><li><p>根据入职时间, 对员工进行降序排序</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp order by entrydate desc;</span></span></code></pre></div></li><li><p>根据年龄对公司的员工进行升序排序 , 年龄相同 , 再按照入职时间进行降序排序</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp order by age asc , entrydate desc;</span></span></code></pre></div></li></ul><h3 id="_5-8-分页查询" tabindex="-1">5.8 分页查询 <a class="header-anchor" href="#_5-8-分页查询" aria-label="Permalink to &quot;5.8 分页查询&quot;">​</a></h3><blockquote><p>分页操作在业务系统开发时，也是非常常见的一个功能，我们在网站中看到的各种各样的分页条，后台都需要借助于数据库的分页操作。</p></blockquote><h4 id="a-语法格式-4" tabindex="-1">a）语法格式 <a class="header-anchor" href="#a-语法格式-4" aria-label="Permalink to &quot;a）语法格式&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数;</span></span></code></pre></div><h4 id="b-注意事项" tabindex="-1">b）注意事项 <a class="header-anchor" href="#b-注意事项" aria-label="Permalink to &quot;b）注意事项&quot;">​</a></h4><ul><li><p>起始索引从<code>0</code>开始，==起始索引 = （查询页码 - 1）* 每页显示记录数==。</p></li><li><p>分页查询是数据库的方言，<strong>不同的数据库有不同的实现</strong>，<code>MySQL</code>中是<code>LIMIT</code>。</p></li><li><p>如果查询的是第一页数据，起始索引可以省略，直接简写为 limit 10。</p></li></ul><h4 id="c-案例练习-4" tabindex="-1">c）案例练习 <a class="header-anchor" href="#c-案例练习-4" aria-label="Permalink to &quot;c）案例练习&quot;">​</a></h4><ul><li><p>查询第1页员工数据, 每页展示10条记录</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp limit 10;</span></span></code></pre></div><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp limit 0,10;</span></span></code></pre></div></li><li><p>查询第2页员工数据, 每页展示10条记录</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp limit 10,10;</span></span></code></pre></div></li></ul><h3 id="_5-9-执行顺序" tabindex="-1">5.9 执行顺序 <a class="header-anchor" href="#_5-9-执行顺序" aria-label="Permalink to &quot;5.9 执行顺序&quot;">​</a></h3><blockquote><p>在讲解DQL语句的具体语法之前，我们已经讲解了DQL语句的完整语法，及编写顺序，接下来，我们要来说明的是DQL语句在执行时的执行顺序，也就是先执行那一部分，后执行那一部分。</p></blockquote><p><code>FROM</code> ➤ <code>WHERE</code> ➤ <code>GROUP BY</code> ➤ <code>SELECT</code> ➤ <code>ORDER BY</code> ➤ <code>LIMIT</code></p><p><img src="`+p+`" alt="image-20220604130048234"></p><h2 id="_6-dcl-不重要" tabindex="-1">6.DCL（不重要） <a class="header-anchor" href="#_6-dcl-不重要" aria-label="Permalink to &quot;6.DCL（不重要）&quot;">​</a></h2><blockquote><p><code>DCL</code>英文全称是**<code>Data Control Language</code>**(数据控制语言)，用来管理数据库用户、控制数据库的访问权限。</p><p>作为Java开发程序员的话，我们是无需关心DCL这一部分的，因为在实际工作中这不是我们所负责的内容！</p></blockquote><h3 id="_6-1-用户管理" tabindex="-1">6.1 用户管理 <a class="header-anchor" href="#_6-1-用户管理" aria-label="Permalink to &quot;6.1 用户管理&quot;">​</a></h3><ul><li><p>查询用户</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>USER mysql;</span></span>
<span class="line"><span>SELECT * FROM user;</span></span></code></pre></div></li><li><p>创建用户</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>CREATE USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED BY &#39;密码&#39;;</span></span></code></pre></div></li><li><p>修改用户密码</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED WITH mysql_native_password BY &#39;新密码&#39;;</span></span></code></pre></div></li><li><p>删除用户</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>DROP USER &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div></li></ul><p>注意：主机名可以使用 % 通配</p><h3 id="_6-2-权限控制" tabindex="-1">6.2 权限控制 <a class="header-anchor" href="#_6-2-权限控制" aria-label="Permalink to &quot;6.2 权限控制&quot;">​</a></h3><ul><li><p>常用权限</p><table><thead><tr><th>权限</th><th>说明</th></tr></thead><tbody><tr><td>ALL, ALL PRIVILEGES</td><td>所有权限</td></tr><tr><td>SELECT</td><td>查询数据</td></tr><tr><td>INSERT</td><td>插入数据</td></tr><tr><td>UPDATE</td><td>修改数据</td></tr><tr><td>DELETE</td><td>删除数据</td></tr><tr><td>ALTER</td><td>修改表</td></tr><tr><td>DROP</td><td>删除数据库/表/视图</td></tr><tr><td>CREATE</td><td>创建数据库/表</td></tr></tbody></table></li><li><p>查询权限</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SHOW GRANTS FOR &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div></li><li><p>授予权限</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>GRANT 权限列表 ON 数据库名.表名 TO &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div></li><li><p>撤销权限</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>REVOKE 权限列表 ON 数据库名.表名 FROM &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div></li><li><p>注意事项</p><ul><li><p>多个权限用逗号分隔</p></li><li><p>授权时，数据库名和表名可以用 <code>*</code> 进行通配，代表所有</p></li></ul></li></ul><h2 id="二、函数" tabindex="-1">二、函数 <a class="header-anchor" href="#二、函数" aria-label="Permalink to &quot;二、函数&quot;">​</a></h2><blockquote><p>==函数==是指一段可以<strong>直接被另一段程序调用</strong>的程序或代码。 也就意味着，这一段程序或代码在<code>MySQL</code>中已经给我们提供了，我们要做的就是在合适的业务场景调用对应的函数完成对应的业务需求即可。</p></blockquote><p>Ps：其实很少用到函数的，可以说基本用不到，所以我这就不记那么详细了。</p><h2 id="_1-字符串函数" tabindex="-1">1.字符串函数 <a class="header-anchor" href="#_1-字符串函数" aria-label="Permalink to &quot;1.字符串函数&quot;">​</a></h2><ul><li><p>常用函数</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CONCAT(s1, s2, …, sn)</td><td>字符串拼接，将s1, s2, …, sn拼接成一个字符串</td></tr><tr><td>LOWER(str)</td><td>将字符串全部转为小写</td></tr><tr><td>UPPER(str)</td><td>将字符串全部转为大写</td></tr><tr><td>LPAD(str, n, pad)</td><td>左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td></tr><tr><td>RPAD(str, n, pad)</td><td>右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td></tr><tr><td>TRIM(str)</td><td>去掉字符串头部和尾部的空格</td></tr><tr><td>SUBSTRING(str, start, len)</td><td>返回从字符串str从start位置起的len个长度的字符串</td></tr></tbody></table></li><li><p>使用示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>-- 拼接</span></span>
<span class="line"><span>SELECT CONCAT(&#39;Hello&#39;, &#39;World&#39;);</span></span>
<span class="line"><span>-- 小写</span></span>
<span class="line"><span>SELECT LOWER(&#39;Hello&#39;);</span></span>
<span class="line"><span>-- 大写</span></span>
<span class="line"><span>SELECT UPPER(&#39;Hello&#39;);</span></span>
<span class="line"><span>-- 左填充</span></span>
<span class="line"><span>SELECT LPAD(&#39;01&#39;, 5, &#39;-&#39;);</span></span>
<span class="line"><span>-- 右填充</span></span>
<span class="line"><span>SELECT RPAD(&#39;01&#39;, 5, &#39;-&#39;);</span></span>
<span class="line"><span>-- 去除空格</span></span>
<span class="line"><span>SELECT TRIM(&#39; Hello World &#39;);</span></span>
<span class="line"><span>-- 切片（起始索引为1）</span></span>
<span class="line"><span>SELECT SUBSTRING(&#39;Hello World&#39;, 1, 5);</span></span></code></pre></div></li></ul><h2 id="_2-数值函数" tabindex="-1">2.数值函数 <a class="header-anchor" href="#_2-数值函数" aria-label="Permalink to &quot;2.数值函数&quot;">​</a></h2><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CEIL(x)</td><td>向上取整</td></tr><tr><td>FLOOR(x)</td><td>向下取整</td></tr><tr><td>MOD(x, y)</td><td>返回x/y的模</td></tr><tr><td>RAND()</td><td>返回0~1内的随机数</td></tr><tr><td>ROUND(x, y)</td><td>求参数x的四舍五入值，保留y位小数</td></tr></tbody></table><h2 id="_3-日期函数" tabindex="-1">3.日期函数 <a class="header-anchor" href="#_3-日期函数" aria-label="Permalink to &quot;3.日期函数&quot;">​</a></h2><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CURDATE()</td><td>返回当前日期</td></tr><tr><td>CURTIME()</td><td>返回当前时间</td></tr><tr><td>NOW()</td><td>返回当前日期和时间</td></tr><tr><td>YEAR(date)</td><td>获取指定date的年份</td></tr><tr><td>MONTH(date)</td><td>获取指定date的月份</td></tr><tr><td>DAY(date)</td><td>获取指定date的日期</td></tr><tr><td>DATE_ADD(date, INTERVAL expr type)</td><td>返回一个日期/时间值加上一个时间间隔expr后的时间值</td></tr><tr><td>DATEDIFF(date1, date2)</td><td>返回起始时间date1和结束时间date2之间的天数</td></tr></tbody></table><h2 id="_4-流程函数" tabindex="-1">4.流程函数 <a class="header-anchor" href="#_4-流程函数" aria-label="Permalink to &quot;4.流程函数&quot;">​</a></h2><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>IF(value, t, f)</td><td>如果value为true，则返回t，否则返回f</td></tr><tr><td>IFNULL(value1, value2)</td><td>如果value1不为空，返回value1，否则返回value2</td></tr><tr><td>CASE WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END</td><td>如果val1为true，返回res1，… 否则返回default默认值</td></tr><tr><td>CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END</td><td>如果expr的值等于val1，返回res1，… 否则返回default默认值</td></tr></tbody></table><h2 id="三、约束" tabindex="-1">三、约束 <a class="header-anchor" href="#三、约束" aria-label="Permalink to &quot;三、约束&quot;">​</a></h2><blockquote><p>约束是作用于表中字段上的规则，用于限制存储在表中的数据。</p></blockquote><p>Ps：我们仅需了解约束的含义即可，实际开发中这都是在建表时就已经确定了的。</p><h2 id="_1-常用约束" tabindex="-1">1.常用约束 <a class="header-anchor" href="#_1-常用约束" aria-label="Permalink to &quot;1.常用约束&quot;">​</a></h2><table><thead><tr><th>约束</th><th>描述</th><th>关键字</th></tr></thead><tbody><tr><td>非空约束</td><td>限制该字段的数据不能为null</td><td>NOT NULL</td></tr><tr><td>唯一约束</td><td>保证该字段的所有数据都是唯一、不重复的</td><td>UNIQUE</td></tr><tr><td>主键约束</td><td>主键是一行数据的唯一标识，要求非空且唯一</td><td>PRIMARY KEY</td></tr><tr><td>默认约束</td><td>保存数据时，如果未指定该字段的值，则采用默认值</td><td>DEFAULT</td></tr><tr><td>检查约束（8.0.1版本后）</td><td>保证字段值满足某一个条件</td><td>CHECK</td></tr><tr><td>外键约束</td><td>用来让两张图的数据之间建立连接，保证数据的一致性和完整性</td><td>FOREIGN KEY</td></tr></tbody></table><p>约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束。</p><h2 id="_2-外键约束" tabindex="-1">2.外键约束 <a class="header-anchor" href="#_2-外键约束" aria-label="Permalink to &quot;2.外键约束&quot;">​</a></h2><blockquote><p>用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性</p></blockquote><ul><li><p>建表时添加外键约束</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>CREATE TABLE 表名(</span></span>
<span class="line"><span>    字段名 字段类型,</span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>    [CONSTRAINT] [外键名称] FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名)</span></span>
<span class="line"><span>);</span></span></code></pre></div></li><li><p>建表后添加外键约束</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名) REFERENCES 主表(主表列名);</span></span></code></pre></div></li><li><p>删除外键</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 DROP FOREIGN KEY 外键名;</span></span></code></pre></div></li></ul><blockquote><p>删除/更新行为</p></blockquote><table><thead><tr><th>行为</th><th>说明</th></tr></thead><tbody><tr><td>NO ACTION</td><td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新（与RESTRICT一致）</td></tr><tr><td>RESTRICT</td><td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新（与NO ACTION一致）</td></tr><tr><td>CASCADE</td><td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则也删除/更新外键在子表中的记录</td></tr><tr><td>SET NULL</td><td>当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（要求该外键允许为null）</td></tr><tr><td>SET DEFAULT</td><td>父表有变更时，子表将外键设为一个默认值（Innodb不支持）</td></tr></tbody></table><p>更改删除/更新行为</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名(主表字段名) ON UPDATE 行为 ON DELETE 行为;</span></span></code></pre></div><h2 id="三、多表查询" tabindex="-1">三、多表查询 <a class="header-anchor" href="#三、多表查询" aria-label="Permalink to &quot;三、多表查询&quot;">​</a></h2><blockquote><p>我们之前在讲解SQL语句的时候，讲解了DQL语句，也就是数据查询语句，但是之前讲解的查询都是单表查询，而本章节我们要学习的则是多表查询操作。</p></blockquote><p>Ps：相较于约束来讲，本章确实是个重点，多表联查会在开发中经常用到，因此需要认真学习！！！</p><h2 id="_1-多表关系" tabindex="-1">1.多表关系 <a class="header-anchor" href="#_1-多表关系" aria-label="Permalink to &quot;1.多表关系&quot;">​</a></h2><p>项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：</p><ol><li><strong>一对多（多对一）</strong></li><li><strong>多对多</strong></li><li><strong>一对一</strong></li></ol><h3 id="_1-1-一对多" tabindex="-1">1.1 一对多 <a class="header-anchor" href="#_1-1-一对多" aria-label="Permalink to &quot;1.1 一对多&quot;">​</a></h3><ul><li>案例：部门 与 员工的关系</li><li>关系：一个部门对应多个员工，一个员工对应一个部门</li><li>实现：在多的一方建立外键，指向一的一方的主键</li></ul><p><img src="`+l+'" alt="image-20220604201130760"></p><h3 id="_1-2-多对多" tabindex="-1">1.2 多对多 <a class="header-anchor" href="#_1-2-多对多" aria-label="Permalink to &quot;1.2 多对多&quot;">​</a></h3><ul><li>案例：学生 与 课程的关系</li><li>关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择</li><li>实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</li></ul><p><img src="'+i+'" alt="image-20220604201411978"></p><h3 id="_1-3-一对一" tabindex="-1">1.3 一对一 <a class="header-anchor" href="#_1-3-一对一" aria-label="Permalink to &quot;1.3 一对一&quot;">​</a></h3><ul><li>案例：用户 与 用户详情的关系</li><li>关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率</li><li>实现：在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的(UNIQUE)</li></ul><p><img src="'+d+`" alt="image-20220604201513196"></p><h2 id="_2-多表查询概述" tabindex="-1">2.多表查询概述 <a class="header-anchor" href="#_2-多表查询概述" aria-label="Permalink to &quot;2.多表查询概述&quot;">​</a></h2><h3 id="_2-1-数据准备" tabindex="-1">2.1 数据准备 <a class="header-anchor" href="#_2-1-数据准备" aria-label="Permalink to &quot;2.1 数据准备&quot;">​</a></h3><ul><li><p>删除之前的 emp, dept表</p></li><li><p>执行下面SQL语句</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>CREATE TABLE dept (</span></span>
<span class="line"><span>id int PRIMARY KEY AUTO_INCREMENT COMMENT &#39;ID&#39;,</span></span>
<span class="line"><span>name varchar(50) NOT NULL COMMENT &#39;部门名称&#39;</span></span>
<span class="line"><span>) COMMENT &#39;部门表&#39;;</span></span>
<span class="line"><span>INSERT INTO dept (id, name) VALUES (1, &#39;研发部&#39;), (2, &#39;市场部&#39;),(3, &#39;财务部&#39;), (4, &#39;销售部&#39;), (5, &#39;总经办&#39;), (6, &#39;人事部&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CREATE TABLE emp (</span></span>
<span class="line"><span>id int PRIMARY KEY AUTO_INCREMENT COMMENT &#39;ID&#39;,</span></span>
<span class="line"><span>name varchar(50) NOT NULL COMMENT &#39;姓名&#39;,</span></span>
<span class="line"><span>age int COMMENT &#39;年龄&#39;,</span></span>
<span class="line"><span>job varchar(20) COMMENT &#39;职位&#39;,</span></span>
<span class="line"><span>salary int COMMENT &#39;薪资&#39;,</span></span>
<span class="line"><span>entrydate date COMMENT &#39;入职时间&#39;,</span></span>
<span class="line"><span>managerid int COMMENT &#39;直属领导ID&#39;,</span></span>
<span class="line"><span>dept_id int COMMENT &#39;部门ID&#39;</span></span>
<span class="line"><span>) COMMENT &#39;员工表&#39;;</span></span>
<span class="line"><span>alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references dept(id);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>INSERT INTO emp (id, name, age, job,salary, entrydate, managerid, dept_id)</span></span>
<span class="line"><span>VALUES</span></span>
<span class="line"><span>    (1, &#39;金庸&#39;, 66, &#39;总裁&#39;, 20000, &#39;2000-01-01&#39;, null, 5),</span></span>
<span class="line"><span>    (2, &#39;张无忌&#39;, 20, &#39;项目经理&#39;, 12500, &#39;2005-12-05&#39;, 1, 1),</span></span>
<span class="line"><span>    (3, &#39;杨逍&#39;, 33, &#39;开发&#39;, 8400, &#39;2000-11-03&#39;, 2, 1),</span></span>
<span class="line"><span>    (4, &#39;韦一笑&#39;, 48, &#39;开发&#39;, 11000, &#39;2002-02-05&#39;, 2, 1),</span></span>
<span class="line"><span>    (5, &#39;常遇春&#39;, 43, &#39;开发&#39;, 10500, &#39;2004-09-07&#39;, 3, 1),</span></span>
<span class="line"><span>    (6, &#39;小昭&#39;, 19, &#39;程序员鼓励师&#39;, 6600, &#39;2004-10-12&#39;, 2, 1),</span></span>
<span class="line"><span>    (7, &#39;灭绝&#39;, 60, &#39;财务总监&#39;, 8500, &#39;2002-09-12&#39;, 1, 3),</span></span>
<span class="line"><span>    (8, &#39;周芷若&#39;, 19, &#39;会计&#39;, 48000, &#39;2006-06-02&#39;, 7, 3),</span></span>
<span class="line"><span>    (9, &#39;丁敏君&#39;, 23, &#39;出纳&#39;, 5250, &#39;2009-05-13&#39;, 7, 3),</span></span>
<span class="line"><span>    (10, &#39;赵敏&#39;, 20, &#39;市场部总监&#39;, 12500, &#39;2004-10-12&#39;, 1, 2),</span></span>
<span class="line"><span>    (11, &#39;鹿杖客&#39;, 56, &#39;职员&#39;, 3750, &#39;2006-10-03&#39;, 10, 2),</span></span>
<span class="line"><span>    (12, &#39;鹤笔翁&#39;, 19, &#39;职员&#39;, 3750, &#39;2007-05-09&#39;, 10, 2),</span></span>
<span class="line"><span>    (13, &#39;方东白&#39;, 19, &#39;职员&#39;, 5500, &#39;2009-02-12&#39;, 10, 2),</span></span>
<span class="line"><span>    (14, &#39;张三丰&#39;, 88, &#39;销售总监&#39;, 14000, &#39;2004-10-12&#39;, 1, 4),</span></span>
<span class="line"><span>    (15, &#39;俞莲舟&#39;, 38, &#39;销售&#39;, 4600, &#39;2004-10-12&#39;, 14, 4),</span></span>
<span class="line"><span>    (16, &#39;宋远桥&#39;, 40, &#39;销售&#39;, 4600, &#39;2004-10-12&#39;, 14, 4),</span></span>
<span class="line"><span>    (17, &#39;陈友谅&#39;, 42, null, 2000, &#39;2011-10-12&#39;, 1, null);</span></span></code></pre></div></li></ul><h3 id="_2-2-笛卡尔积" tabindex="-1">2.2 笛卡尔积 <a class="header-anchor" href="#_2-2-笛卡尔积" aria-label="Permalink to &quot;2.2 笛卡尔积&quot;">​</a></h3><blockquote><p>笛卡尔乘积是指在数学中，两个集合 A集合 和 B集合 的所有组合情况。</p></blockquote><ul><li><p>这是我们查单表的SQL语句</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp;</span></span></code></pre></div></li><li><p>那么我们要执行多表查询，就只需要使用逗号分隔多张表即可</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp , dept;</span></span></code></pre></div></li><li><p>但是这个时候查出来的结果却是102条记录</p><p><img src="`+o+'" alt="image-20220605080339628"></p><p>与 部门表dept所有记录(6) 的所有组合情况，这种现象称之为笛卡尔积。</p></li></ul><blockquote><p>在SQL语句中，如何来去除无效的笛卡尔积呢？ 我们可以给多表查询加上连接查询的条件即可。</p></blockquote><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp , dept where emp.dept_id = dept.id;</span></span></code></pre></div><p><img src="'+c+'" alt="image-20220605080630910"></p><p>而由于id为17的员工，没有<code>dept_id</code>字段值，所以在多表查询时，根据连接查询的条件并没有查询到。</p><h3 id="_2-3-分类" tabindex="-1">2.3 分类 <a class="header-anchor" href="#_2-3-分类" aria-label="Permalink to &quot;2.3 分类&quot;">​</a></h3><blockquote><p>多表查询又分为以下两大类：</p></blockquote><ul><li><p>连接查询</p><ul><li><p>内连接：相当于查询A、B交集部分数据</p></li><li><p>外连接：</p><ul><li><p>左外连接：查询左表所有数据，以及两张表交集部分数据</p></li><li><p>右外连接：查询右表所有数据，以及两张表交集部分数据</p></li></ul></li><li><p>自连接：当前表与自身的连接查询，自连接必须使用表别名</p></li></ul></li><li><p>子查询</p></li></ul><h2 id="_3-内连接" tabindex="-1">3.内连接 <a class="header-anchor" href="#_3-内连接" aria-label="Permalink to &quot;3.内连接&quot;">​</a></h2><blockquote><p>内连接查询的是两张表交集部分的数据。(也就是绿色部分的数据)</p></blockquote><p><img src="'+a+'" alt="image-20220605081106113"></p><p>内连接的语法分为两种：<strong>隐式内连接</strong>、<strong>显式内连接</strong>。</p><h3 id="_3-1-语法格式" tabindex="-1">3.1 语法格式 <a class="header-anchor" href="#_3-1-语法格式" aria-label="Permalink to &quot;3.1 语法格式&quot;">​</a></h3><ul><li><p>隐式内连接</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表1 , 表2 WHERE 条件 ... ;</span></span></code></pre></div></li><li><p>显式内连接</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表1 [ INNER ] JOIN 表2 ON 连接条件 ... ;</span></span></code></pre></div></li></ul><h3 id="_3-2-案例练习" tabindex="-1">3.2 案例练习 <a class="header-anchor" href="#_3-2-案例练习" aria-label="Permalink to &quot;3.2 案例练习&quot;">​</a></h3><ul><li>查询每一个员工的姓名 , 及关联的部门的名称 (隐式内连接实现)</li></ul><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select e.`name`, d.`name` from emp e,dept d where e.dept_id = d.id;</span></span></code></pre></div><ul><li><p>查询每一个员工的姓名 , 及关联的部门的名称 (显式内连接实现)</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select e.`name`, d.`name` from emp e join dept d on e.dept_id = d.id;</span></span></code></pre></div></li></ul><h2 id="_4-外连接" tabindex="-1">4.外连接 <a class="header-anchor" href="#_4-外连接" aria-label="Permalink to &quot;4.外连接&quot;">​</a></h2><blockquote><p>外连接和内连接一样查询的都是两个表交集的数据，不同的是左外连接会查询左表的全部数据以及交集数据，右外连接与之相对。</p></blockquote><p><img src="'+a+`" alt="image-20220605081106113"></p><h3 id="_4-1-语法格式" tabindex="-1">4.1 语法格式 <a class="header-anchor" href="#_4-1-语法格式" aria-label="Permalink to &quot;4.1 语法格式&quot;">​</a></h3><ul><li><p>左外连接</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表1 LEFT [ OUTER ] JOIN 表2 ON 条件 ... ;</span></span></code></pre></div></li><li><p>右外连接</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表1 RIGHT [ OUTER ] JOIN 表2 ON 条件 ...;</span></span></code></pre></div></li></ul><h3 id="_4-2-案例练习" tabindex="-1">4.2 案例练习 <a class="header-anchor" href="#_4-2-案例练习" aria-label="Permalink to &quot;4.2 案例练习&quot;">​</a></h3><ul><li><p>查询<code>emp</code>表的所有数据, 和对应的部门信息（左外）</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select e.*,d.name from emp e left join dept d on e.dept_id = d.id;</span></span></code></pre></div></li><li><p>查询<code>dept</code>表的所有数据, 和对应的员工信息（右外）</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select e.*,d.name from emp e right join dept d on e.dept_id = d.id;</span></span></code></pre></div></li></ul><p>左外连接和右外连接是可以相互替换的，只需要调整在连接查询时SQL中，表结构的先后顺序就可以了。而我们在日常开发使用时，更偏向于左外连接。</p><h2 id="_5-自连接" tabindex="-1">5.自连接 <a class="header-anchor" href="#_5-自连接" aria-label="Permalink to &quot;5.自连接&quot;">​</a></h2><h3 id="_5-1-自链接查询" tabindex="-1">5.1 自链接查询 <a class="header-anchor" href="#_5-1-自链接查询" aria-label="Permalink to &quot;5.1 自链接查询&quot;">​</a></h3><blockquote><p>当前表与自身的连接查询，自连接必须使用表别名</p></blockquote><ul><li><p>语法格式</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表A 别名A JOIN 表A 别名B ON 条件 ...;</span></span></code></pre></div><p>自连接查询，可以是内连接查询，也可以是外连接查询</p></li><li><p>案例练习</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>-- 查询员工及其所属领导的名字</span></span>
<span class="line"><span>select a.name, b.name from employee a, employee b where a.manager = b.id;</span></span>
<span class="line"><span>-- 没有领导的也查询出来</span></span>
<span class="line"><span>select a.name, b.name from employee a left join employee b on a.manager = b.id;</span></span></code></pre></div></li></ul><h3 id="_5-2-联合查询" tabindex="-1">5.2 联合查询 <a class="header-anchor" href="#_5-2-联合查询" aria-label="Permalink to &quot;5.2 联合查询&quot;">​</a></h3><blockquote><p>把多次查询的结果合并，形成一个新的查询集，其实就是吧两个查询语句给连起来了。</p></blockquote><ul><li><p>语法格式</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表A ...</span></span>
<span class="line"><span>UNION [ALL]</span></span>
<span class="line"><span>SELECT 字段列表 FROM 表B ...</span></span></code></pre></div></li><li><p>注意事项</p><ul><li>UNION ALL 会有重复结果，UNION 不会</li><li>联合查询比使用or效率高，不会使索引失效</li></ul></li></ul><h2 id="_6-子查询" tabindex="-1">6.子查询 <a class="header-anchor" href="#_6-子查询" aria-label="Permalink to &quot;6.子查询&quot;">​</a></h2><h3 id="_6-1-概述" tabindex="-1">6.1 概述 <a class="header-anchor" href="#_6-1-概述" aria-label="Permalink to &quot;6.1 概述&quot;">​</a></h3><blockquote><p>SQL语句中嵌套SELECT语句，称为嵌套查询，又称子查询。</p></blockquote><ul><li><p>语法格式</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);</span></span></code></pre></div><p>子查询外部的语句可以是<code>INSERT</code> / <code>UPDATE</code> / <code>DELETE</code> / <code>SELECT</code> 的任何一个。</p></li><li><p>根据子查询结果不同，分为：</p><ul><li>标量子查询（子查询结果为单个值）</li><li>列子查询（子查询结果为一列）</li><li>行子查询（子查询结果为一行）</li><li>表子查询（子查询结果为多行多列）</li></ul></li><li><p>根据子查询位置，分为：</p><ul><li>WHERE 之后</li><li>FROM 之后</li><li>SELECT 之后</li></ul></li></ul><h3 id="_6-2-标量子查询" tabindex="-1">6.2 标量子查询 <a class="header-anchor" href="#_6-2-标量子查询" aria-label="Permalink to &quot;6.2 标量子查询&quot;">​</a></h3><blockquote><p>子查询返回的结果是单个值（数字、字符串、日期等），最简单的形式，这种子查询称为标量子查询。</p></blockquote><p>常用操作符：<code>- &lt; &gt; &gt; &gt;= &lt; &lt;=</code></p><p>案例练习：</p><ul><li><p>查询 “销售部” 的所有员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where dept_id = (select id from dept where name = &#39;销售部&#39;);</span></span></code></pre></div></li><li><p>查询在 “方东白” 入职之后的员工信息</p></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where entrydate &gt; (select entrydate from emp where name = &#39;方东白&#39;);</span></span></code></pre></div><h3 id="_6-3-列子查询" tabindex="-1">6.3 列子查询 <a class="header-anchor" href="#_6-3-列子查询" aria-label="Permalink to &quot;6.3 列子查询&quot;">​</a></h3><blockquote><p>子查询返回的结果是一列（可以是多行），这种子查询称为列子查询。</p></blockquote><p>常用的操作符：<code>IN 、NOT IN 、 ANY 、SOME 、 ALL</code></p><table><thead><tr><th>操作符</th><th>描述</th></tr></thead><tbody><tr><td>IN</td><td>在指定的集合范围内，多选一</td></tr><tr><td>NOT IN</td><td>不在指定的集合范围内</td></tr><tr><td>ANY</td><td>子查询返回列表中，有任意一个满足即可</td></tr><tr><td>SOME</td><td>与ANY等同，使用SOME的地方都可以使用ANY</td></tr><tr><td>ALL</td><td>子查询返回列表的所有值都必须满足</td></tr></tbody></table><p>案例练习：</p><ul><li><p>查询 “销售部” 和 “市场部” 的所有员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where dept_id in (select id from dept where name = &#39;销售部&#39; or name = &#39;市场部&#39;);</span></span></code></pre></div></li><li><p>查询比 “财务部” 所有人工资都高的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where salary &gt; all ( select salary from emp where dept_id = (select id from dept where name = &#39;财务部&#39;) );</span></span></code></pre></div></li><li><p>查询比研发部其中任意一人工资高的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where salary &gt; any ( select salary from emp where dept_id = (select id from dept where name = &#39;研发部&#39;) );</span></span></code></pre></div></li></ul><h3 id="_6-4-行子查询" tabindex="-1">6.4 行子查询 <a class="header-anchor" href="#_6-4-行子查询" aria-label="Permalink to &quot;6.4 行子查询&quot;">​</a></h3><blockquote><p>子查询返回的结果是一行（可以是多列），这种子查询称为行子查询。</p></blockquote><p>常用的操作符：<code>= 、&lt;&gt; 、IN 、NOT IN</code></p><p>案例练习：</p><ul><li>查询与 “张无忌” 的薪资及直属领导相同的员工信息 ;</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where (salary,managerid) = (select salary, managerid from emp where name = &#39;张无忌&#39;);</span></span></code></pre></div><h3 id="_6-5-表子查询" tabindex="-1">6.5 表子查询 <a class="header-anchor" href="#_6-5-表子查询" aria-label="Permalink to &quot;6.5 表子查询&quot;">​</a></h3><blockquote><p>子查询返回的结果是多行多列，这种子查询称为表子查询。</p></blockquote><p>常用操作符：<code>IN</code></p><p>案例练习：</p><ul><li><p>查询与 “鹿杖客” , “宋远桥” 的职位和薪资相同的员工信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select * from emp where (job,salary) in ( select job, salary from emp where name = &#39;鹿杖客&#39; or name = &#39;宋远桥&#39; );</span></span></code></pre></div></li><li><p>查询入职日期是 “2006-01-01” 之后的员工信息 , 及其部门信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>select e.*, d.* from (select * from emp where entrydate &gt; &#39;2006-01-01&#39;) e left join dept d on e.dept_id = d.id ;</span></span></code></pre></div></li></ul><h2 id="四、事务" tabindex="-1">四、事务 <a class="header-anchor" href="#四、事务" aria-label="Permalink to &quot;四、事务&quot;">​</a></h2><h2 id="_1-事务简介" tabindex="-1">1.事务简介 <a class="header-anchor" href="#_1-事务简介" aria-label="Permalink to &quot;1.事务简介&quot;">​</a></h2><blockquote><p><strong>事务</strong>是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p></blockquote><p>举例说明：</p><p>张三给李四转账1000块钱，张三银行账户的钱==减少1000==，而李四银行账户的钱要==增加1000==。 这一组操作就必须在一个事务的范围内，<strong>要么都成功</strong>，<strong>要么都失败</strong>。</p><p><img src="`+r+`" alt="image-20220605121214330"></p><p><strong>注意： 默认MySQL的事务是自动提交的，也就是说，当执行完一条DML语句时，MySQL会立即隐式的提交事务。</strong></p><h2 id="_2-事务操作" tabindex="-1">2.事务操作 <a class="header-anchor" href="#_2-事务操作" aria-label="Permalink to &quot;2.事务操作&quot;">​</a></h2><h3 id="_2-1-数据准备-1" tabindex="-1">2.1 数据准备 <a class="header-anchor" href="#_2-1-数据准备-1" aria-label="Permalink to &quot;2.1 数据准备&quot;">​</a></h3><blockquote><p>在开始学习事务之前需要先执行以下SQL语句来导入数据。</p></blockquote><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>drop table if exists account;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>create table account(</span></span>
<span class="line"><span>    id int primary key AUTO_INCREMENT comment &#39;ID&#39;,</span></span>
<span class="line"><span>    name varchar(10) comment &#39;姓名&#39;,</span></span>
<span class="line"><span>    money double(10, 2) comment &#39;余额&#39;</span></span>
<span class="line"><span>) comment &#39;账户表&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>insert into account(name, money) VALUES (&#39;张三&#39;, 2000),(&#39;李四&#39;, 2000);</span></span></code></pre></div><h3 id="_2-2-未控制事务" tabindex="-1">2.2 未控制事务 <a class="header-anchor" href="#_2-2-未控制事务" aria-label="Permalink to &quot;2.2 未控制事务&quot;">​</a></h3><blockquote><p>当前情境下事务是MySQL默认的事务，也就是每执行一句更新操作都将由MySQL自动隐式提交。</p></blockquote><ul><li><p>测试转账操作的正常情况</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>-- 1. 查询张三余额 </span></span>
<span class="line"><span>select * from account where name = &#39;张三&#39;; </span></span>
<span class="line"><span>-- 2. 张三的余额减少1000 </span></span>
<span class="line"><span>update account set money = money - 1000 where name = &#39;张三&#39;; </span></span>
<span class="line"><span>-- 3. 李四的余额增加1000 </span></span>
<span class="line"><span>update account set money = money + 1000 where name = &#39;李四&#39;;</span></span></code></pre></div><p><img src="`+h+`" alt="image-20220605122748424"></p></li><li><p>测试异常情况（执行之前先将两个人的余额都恢复到2000）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>-- 1. 查询张三余额 </span></span>
<span class="line"><span>select * from account where name = &#39;张三&#39;; </span></span>
<span class="line"><span>-- 2. 张三的余额减少1000 </span></span>
<span class="line"><span>update account set money = money - 1000 where name = &#39;张三&#39;; </span></span>
<span class="line"><span>出错了...</span></span>
<span class="line"><span>-- 3. 李四的余额增加1000 </span></span>
<span class="line"><span>update account set money = money + 1000 where name = &#39;李四&#39;;</span></span></code></pre></div><p><img src="`+u+`" alt="image-20220605123015353"></p></li></ul><p>通过上面的两种情况演示，我们得知如果是异常情况的话，这种错误是非常致命的，假如真的是两个人之间的转账，一方钱减少了，另一方却没有增加的话，用户必定会勃然大怒，因此我们需要通过控制事务的方式来避免这种情况的出现！</p><h3 id="_2-3-控制事务一-不常用" tabindex="-1">2.3 控制事务一（不常用） <a class="header-anchor" href="#_2-3-控制事务一-不常用" aria-label="Permalink to &quot;2.3 控制事务一（不常用）&quot;">​</a></h3><ul><li><p>查看/设置事务提交方式</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SELECT @@autocommit ; </span></span>
<span class="line"><span>SET @@autocommit = 0 ;</span></span></code></pre></div></li><li><p>提交事务</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>COMMIT;</span></span></code></pre></div></li><li><p>回滚事务</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ROLLBACK;</span></span></code></pre></div></li></ul><p><strong>注意</strong>：上述的这种方式，我们是修改了事务的自动提交行为, 把默认的自动提交修改为了手动提交, 此时我们执行的DML语句都不会提交, 需要手动的执行<code>commit</code>进行提交。</p><h3 id="_2-4-控制事务二-常用" tabindex="-1">2.4 控制事务二（常用） <a class="header-anchor" href="#_2-4-控制事务二-常用" aria-label="Permalink to &quot;2.4 控制事务二（常用）&quot;">​</a></h3><ul><li><p>开启事务</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>START TRANSACTION 或 BEGIN TRANSACTION;</span></span></code></pre></div></li><li><p>提交事务</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>COMMIT;</span></span></code></pre></div></li><li><p>回滚事务</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>ROLLBACK;</span></span></code></pre></div></li></ul><h3 id="_2-5-转账案例" tabindex="-1">2.5 转账案例 <a class="header-anchor" href="#_2-5-转账案例" aria-label="Permalink to &quot;2.5 转账案例&quot;">​</a></h3><blockquote><p>接下来通过控制事务的方式演示一遍转账操作。</p></blockquote><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>-- 开启事务 </span></span>
<span class="line"><span>start transaction </span></span>
<span class="line"><span>-- 1. 查询张三余额 </span></span>
<span class="line"><span>select * from account where name = &#39;张三&#39;; </span></span>
<span class="line"><span>-- 2. 张三的余额减少1000 </span></span>
<span class="line"><span>update account set money = money - 1000 where name = &#39;张三&#39;; </span></span>
<span class="line"><span>-- 3. 李四的余额增加1000 </span></span>
<span class="line"><span>update account set money = money + 1000 where name = &#39;李四&#39;; </span></span>
<span class="line"><span>-- 如果正常执行完毕, 则提交事务 </span></span>
<span class="line"><span>commit; </span></span>
<span class="line"><span>-- 如果执行过程中报错, 则回滚事务 </span></span>
<span class="line"><span>-- rollback;</span></span></code></pre></div><h2 id="_3-事务四大特性-acid" tabindex="-1">3.事务四大特性（ACID） <a class="header-anchor" href="#_3-事务四大特性-acid" aria-label="Permalink to &quot;3.事务四大特性（ACID）&quot;">​</a></h2><ul><li>原子性(<code>Atomicity</code>)：事务是不可分割的最小操作但愿，要么全部成功，要么全部失败</li><li>一致性(<code>Consistency</code>)：事务完成时，必须使所有数据都保持一致状态</li><li>隔离性(<code>Isolation</code>)：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</li><li>持久性(<code>Durability</code>)：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</li></ul><h2 id="_4-并发事务问题" tabindex="-1">4.并发事务问题 <a class="header-anchor" href="#_4-并发事务问题" aria-label="Permalink to &quot;4.并发事务问题&quot;">​</a></h2><table><thead><tr><th>问题</th><th>描述</th></tr></thead><tbody><tr><td>脏读</td><td>一个事务读到另一个事务还没提交的数据</td></tr><tr><td>不可重复读</td><td>一个事务先后读取同一条记录，但两次读取的数据不同</td></tr><tr><td>幻读</td><td>一个事务按照条件查询数据时，没有对应的数据行，但是再插入数据时，又发现这行数据已经存在</td></tr></tbody></table><ul><li><p>赃读（比如B读取到了A未提交的数据）</p><p><img src="`+g+'" alt="image-20220605125309397"></p></li><li><p>不可重复读（事务A两次读取同一条记录，但是读取到的数据却是不一样的）</p><p><img src="'+b+'" alt="image-20220605125417374"></p></li><li><p>幻读</p><p><img src="'+m+'" alt="image-20220605125445124"></p></li></ul><h2 id="_5-事务隔离级别" tabindex="-1">5.事务隔离级别 <a class="header-anchor" href="#_5-事务隔离级别" aria-label="Permalink to &quot;5.事务隔离级别&quot;">​</a></h2><table><thead><tr><th>隔离级别</th><th>脏读</th><th>不可重复读</th><th>幻读</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>√</td><td>√</td><td>√</td></tr><tr><td>Read committed</td><td>×</td><td>√</td><td>√</td></tr><tr><td><strong>Repeatable Read(默认)</strong></td><td>×</td><td>×</td><td>√</td></tr><tr><td>Serializable</td><td>×</td><td>×</td><td>×</td></tr></tbody></table><ul><li><p>√表示在当前隔离级别下该问题会出现</p></li><li><p><code>Serializable</code> 性能最低；<code>Read uncommitted</code> 性能最高，数据安全性最差</p></li><li><p>查看事务隔离级别：<code>SELECT @@TRANSACTION_ISOLATION;</code></p></li><li><p>设置事务隔离级别：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light dracula-soft vp-code"><code><span class="line"><span>SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL {READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE };</span></span></code></pre></div><p><code>SESSION</code> 是会话级别，表示只针对当前会话有效，<code>GLOBAL</code> 表示对所有会话有效</p></li></ul>',242),E=[k];function C(y,f,T,R,L,q){return t(),e("div",null,E)}const A=s(v,[["render",C]]);export{S as __pageData,A as default};
